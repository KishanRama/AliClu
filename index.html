

<!doctype html>
<html>
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="chrome=1">
      <title>AliClu</title>
      
      <link rel="stylesheet" href="stylesheets/styles.css">
      <link rel="stylesheet" href="stylesheets/pygment_trac.css">
      <meta name="viewport" content="width=device-width">
	  
      <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
   </head>
   <body>
      <div class="wrapper">
      <header>
         <h1>AliClu</h1>
         <p> A Python implementation of a method that combines Temporal Needleman-Wunsch (TNW) and aglomerative clustering.
         </p>
         <p class="view"><a href="https://github.com/KishanRama/AliClu">View the Project on GitHub <small>AliClu</small></a></p>
      </header>
      <section>
         <h3>Program description</h3>
         <p> AliClu is a Python implementation of a method that combines Temporal Needleman-Wunsch (TNW) [<a href="#ref1">1</a>] and agglomerative hierarchical clustering with validation [<a href="#ref2">2</a>]. The program
		 receives a set of temporal sequences and outputs the final clusters. The program can be used in an automatic or semi-automatic manner. In the automatic
		 mode, the program outputs the final clusters in separated CSV files and a pdf file with the cluster stability analysis. 
		 In the semi-automatic mode, the program first produces a pdf file with dendrograms, tables of averages of clustering indices and graphs with the standard deviation of Adjusted Rand.
		 After analysing this pdf file, the user can input the final number of clusters and the program will output the final clusters and the cluster stability analysis.
		 The python files required to run the program can be downloaded 
            <a href="https://github.com/KishanRama/AliClu/tree/master/Code">here</a>.
         </p>
		 <h4>Requirements</h4>
         <p>
            <ul>
               <li>Install <a href="https://www.python.org/downloads/">Python3</a> in your local machine</li>
               <li>Install the required libraries by running the following code: 
			         <pre><code>$ pip install -r requirements.txt</code></pre>
			   </li>
			   In order to avoid library dependency problems it is recommend to use virtualenv:
			   	     <pre><code>$ virtualenv [give_a_name]
$ source [give_a_name]/bin/activate		#for a linux machine
$ [give_a_name]/bin/activate.ba			#for a windows machine
$ pip install -r requirements.txt	</code></pre>
            </ul>
         <p>
		 
		 <h3>Usage</h3>
         <p>Execute the python file AliClu.py:
         <pre><code>$ python AliClu.py [-h] [-g] [-tp] [-M] [-d] filename maxClusters automatic  </code></pre>
         The command-line options are:
         </p>
         <pre><code>positional arguments:
  filename		Input CSV file with temporal sequences for each patient.
  maxClusters		Maximum number of clusters to be analysed.
  automatic		1 to run AliClu automatically, 0 otherwise.

optional arguments:
  -h, --help			Show this help message and exit.
  -g, --gap			Gap penalty. To analyse a range of gap penalties, the argument should be 
				"[min_gap max_gap step_gap]" where min_gap and max_gap are the minimum and
				maximum gap penalties to be analysed and step_gap is the space between 
				the gap values. To analyse only one gap value simply write "[gap_value]".
				Default the gap ranges from -1 to 1 in steps of 0.1.
  -tp, --temporalPenaltyConstant	
				Temporal Penalty Constant. Default tp is 0.25.
  -M, --bootStrapSamples	Number of bootstrap samples. Default M is 250.
  -d, --distanceMetric		Distance metric for agglomerative clustering. Only 5 distance metrics
				allowed: single, complete, average, centroid and ward. Default d is ward.
	
</code></pre>
		 
         <h4>Input</h4>
         <p>
            The input file must be in comma-separated values (CSV) format, containing the temporal sequences for each subject.
            <ul>
               <li>The first line is the header with the names of the needed attributes. 
			   The header must be always "id_patient", "aux_encode". </li>
               <li>The first column corresponds to the identifier of each subject whereas
					the second column refers to the temporal sequences in the prefix-encoded format.</li>
               <li>All the other lines contains the temporal sequences for each subject.</li>
            </ul>
         <p>
         </p>
         <p>
            Input file example:
         </p>
         <pre><code>id_patient, aux_encode
33496,"0.B,156.C,314.D,1696.Z"
33499,"0.B,148.Z"
33502,"0.A,120.B,2187.Z"
33505,"0.A,873.B,255.C,1145.Z"
33508,"0.A,358.B,420.C,963.D,239.Z"
33511,"0.A,2192.Z"		 
(...)
</code></pre>
         <p>
         </p>
		 <h4>Data preprocessing</h4>
         <p>
Loading...
         </p>
		 
         <h4>Output</h4>
         <p>
			The program outputs the final clusters and the cluster stability analysis. The clusters are presented in separated CSV files in a new directory.
			For example, consider that the program yields 3 clusters. Then 3 CSV files will appear in a directory called '[distanceMetric]_gap_[chosen_gap]_Tp_[tp]_clusters_3':
			<ul>
               <li>Cluster 1 - N1 elements.csv</li>
               <li>Cluster 2 - N2 elements.csv</li>
               <li>Cluster 3 - N3 elements.csv</li>
            </ul>
			where [distanceMetric] is the distance metric used in agglomerative clustering, [chosen_gap] is the chosen gap penalty and [tp] the temporal penalty constant used in the program.
			N1, N2 and N3 are the number of elements in Cluster 1, 2 and 3, respectively.
		 <br>
		 The cluster stability analysis is presented in a pdf file named cluster_stability_analysis.pdf.
		 </br>
         </p>

         
         <h4>Example 1 - Automatic</h4>
         <p>
			In this example let us run AliClu in the automatic mode. The <a href="files/synthetic_temporal_sequences.csv">synthetic_temporal_sequences.csv</a> is the input CSV file, which contains 3 clusters produced by 3 different continuous-time Markov Chains.
			Cluster 1 contain patients with id_patient from 0 to 9, Cluster 2 contain patients with id_patient from 10 to 19 and Cluster 3 has the remaining patients.
         <p>Let us choose 8 as the maximum number of clusters to be analysed. The command line to run AliClu and obtain the final clusters automatically is:
         <pre><code>$ python AliClu.py synthetic_temporal_sequences.csv 8 1</code></pre>
         </p>
         <p>
			Note that no optional argument was used, hence, all the other parameters used in AliClu are set to default.
            The program correctly founds the 3 clusters and outputs the following:
         <ul>
            <li>A directory 'ward_gap_0.8_Tp_0.25_clusters_3' is created with the final clusters in 3 separated CSV files
			     (<a href="files/ward_gap_0.8_Tp_0.25_clusters_3/Cluster 1 - 10 elements.csv">Cluster 1 - 10 elements.csv</a>, 
				 <a href="files/ward_gap_0.8_Tp_0.25_clusters_3/Cluster 2 - 10 elements.csv">Cluster 2 - 10 elements.csv</a>, 
				 <a href="files/ward_gap_0.8_Tp_0.25_clusters_3/Cluster 3 - 10 elements.csv">Cluster 3 - 10 elements.csv</a>).</li>
            <li><a href="files/cluster_stability_analysis.pdf">cluster_stability_analysis.pdf</a>, with the cluster stability analysis.</li>
         </ul>
		 
		 <h4>Example 2 - Semi-automatic</h4>
         <p>
			In this example let us run AliClu in the semi-automatic mode. The input CSV file is again <a href="files/synthetic_temporal_sequences.csv">synthetic_temporal_sequences.csv</a>
			and we choose 8 as the maximum number of clusters to be analysed.
         </p>
         <p>The command line to run AliClu in the semi-automatic mode is:
         <pre><code>$ python AliClu.py synthetic_temporal_sequences.csv 8 0</code></pre>
         </p>
         <p>
            which will give the following in the terminal: </p>
		<p><img src="images/non_automatic_run.png"></p>

		<p>The program is asking the user to input the final number of clusters. In this stage, the program produced a pdf file named <a href="files/semi_automatic_analysis.pdf">semi_automatic_analysis.pdf</a>
		that is meant to auxiliate the user on making the final decision on the number of clusters. The pdf file 
		(download for better visualization in your local pdf viewer) contains:</p>
        <p><embed src="files/semi_automatic_analysis.pdf" width="500" height="375" type='application/pdf'></p> 
<!-- 		<p>
		<div class="slide">
			<img src="images/dendro1.png"/>
		</div>
		<div class="slide">
			<img src="images/avg1.png"/>
		</div>
		<div class="slide">
			<img src="images/std1.png"/>
		</div>
		<div class="slide">
			<img src="images/dendro2.png"/>
		</div>
		<div class="slide">
			<img src="images/avg2.png"/>
		</div>
		<div class="slide">
			<img src="images/std2.png"/>
		</div>
		</p> -->
		
		<p>After analysing the pdf file, the user chooses 3 as the final number of clusters:</p>
		<p><img src="images/non_automatic_run_cluster.png"></p>
		<p>Since more than one gap penalty was analysed, the user also has to input the chosen gap penalty. If only one gap penalty was analysed by the program
		it would not be necessary to input this information. Let us choose again 0.8:</p>
		<p><img src="images/non_automatic_run_gap2.png"></p>
		<p>The program ends and produces again the same outputs as in Example 1.</p>
   		 
		 <h3>References</h3>
         <ol>
            <li><a name="ref1"></a>H. Syed and A. K. Das. Temporal Needleman-Wunsch. <i>IEEE International Conference on Data Science and Advanced Analysis (DSAA)</i>, Dec. 2015.</li>
			<li><a name="ref2"></a>H.-J. Mucha. On validation of hierarchical clustering. In R. Decker and H. J. Lenz, editors, <i>Advances in Data Analysis</i>, pages 115-122, Berlin, Heidelberg, 20017. Springer Berlin Heidelberg</li>
         </ol>

   
      </section>
      <footer>
         <p>This project is maintained by <a href="https://github.com/KishanRama">KishanRama</a></p>
         <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
      </div>
   </body>
</html>

